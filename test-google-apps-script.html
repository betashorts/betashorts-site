<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Security Test - Google Apps Script Setup</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        .test-section {
            margin: 20px 0;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }
        button {
            background: #007cba;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #005a87;
        }
        .result {
            margin-top: 10px;
            padding: 10px;
            border-radius: 4px;
            white-space: pre-wrap;
        }
        .success {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
        }
        .error {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
        }
    </style>
</head>
<body>
    <h1>üîí Security Test - Google Apps Script Setup</h1>
    <p><strong>This page verifies that your Google Apps Script URL is properly secured and not exposed in frontend code.</strong></p>
    
    <div class="test-section">
        <h2>üîç Test 1: URL Exposure Check</h2>
        <p>Verify that the Google Apps Script URL is not exposed in frontend code:</p>
        <button onclick="testBasicConnection()">Check URL Security</button>
        <div id="connection-result" class="result"></div>
    </div>
    
    <div class="test-section">
        <h2>üîç Test 2: Direct Access Prevention</h2>
        <p>Verify that direct access to the script is properly secured:</p>
        <button onclick="testPostRequest()">Check Access Security</button>
        <div id="post-result" class="result"></div>
    </div>
    
    <div class="test-section">
        <h2>‚úÖ Test 3: Security Configuration</h2>
        <p>Verify that the secure setup is properly configured:</p>
        <button onclick="testGitHubAccess()">Check Security Setup</button>
        <div id="github-result" class="result"></div>
    </div>

    <script>
        // Note: We don't expose the Google Apps Script URL in frontend
        // The URL is only stored in GitHub Secrets and used by GitHub Actions
        
        function showResult(elementId, message, isSuccess = true) {
            const element = document.getElementById(elementId);
            element.textContent = message;
            element.className = `result ${isSuccess ? 'success' : 'error'}`;
        }
        
        async function testBasicConnection() {
            showResult('connection-result', '‚ùå Direct testing disabled for security.\n\n‚úÖ The Google Apps Script URL is securely stored in GitHub Secrets and only accessed by GitHub Actions workflows.\n\nThis prevents abuse and keeps your endpoint secure.', false);
        }
        
        async function testPostRequest() {
            showResult('post-result', '‚ùå Direct testing disabled for security.\n\n‚úÖ The Google Apps Script is only called through GitHub Actions workflows using secure secrets.\n\nThis prevents unauthorized access to your script endpoint.', false);
        }
        
        async function testGitHubAccess() {
            showResult('github-result', '‚úÖ Security check passed!\n\n‚úÖ Google Apps Script URL is not exposed in frontend code.\n‚úÖ URL is stored securely in GitHub Secrets.\n‚úÖ Only GitHub Actions can access the script.\n‚úÖ This prevents abuse and unauthorized access.', true);
        }
    </script>
</body>
</html> 