---
layout: default
title: "Admin Panel - Home Template Editor"
meta: '<meta name="description" content="Admin panel for editing home template content with live preview.">'
---

<style>
.admin-container {
    max-width: 1400px;
    margin: 0 auto;
    padding: 2rem;
    font-family: 'Inter', sans-serif;
}

.admin-header {
    background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
    color: white;
    padding: 2rem;
    border-radius: 12px;
    margin-bottom: 2rem;
    text-align: center;
}

.admin-header h1 {
    font-family: 'Playfair Display', serif;
    font-size: 2.5rem;
    margin-bottom: 0.5rem;
}

.admin-header p {
    font-size: 1.1rem;
    opacity: 0.9;
}

.admin-layout {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 2rem;
    margin-bottom: 2rem;
}

.editor-panel {
    background: white;
    border-radius: 12px;
    padding: 2rem;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
    border: 1px solid #e2e8f0;
}

.preview-panel {
    background: white;
    border-radius: 12px;
    padding: 2rem;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
    border: 1px solid #e2e8f0;
    position: sticky;
    top: 2rem;
    max-height: 90vh;
    overflow-y: auto;
}

.section-title {
    font-family: 'Playfair Display', serif;
    font-size: 1.5rem;
    font-weight: 600;
    color: #1e293b;
    margin-bottom: 1.5rem;
    padding-bottom: 0.5rem;
    border-bottom: 2px solid #e2e8f0;
}

.form-group {
    margin-bottom: 1.5rem;
}

.form-group label {
    display: block;
    font-weight: 600;
    color: #374151;
    margin-bottom: 0.5rem;
    font-size: 0.95rem;
}

.form-group input,
.form-group textarea,
.form-group select {
    width: 100%;
    padding: 0.75rem;
    border: 2px solid #e2e8f0;
    border-radius: 8px;
    font-family: 'Inter', sans-serif;
    font-size: 0.95rem;
    transition: border-color 0.3s ease;
}

.form-group input:focus,
.form-group textarea:focus,
.form-group select:focus {
    outline: none;
    border-color: #3b82f6;
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
}

.form-group textarea {
    resize: vertical;
    min-height: 80px;
}

.image-upload {
    border: 2px dashed #d1d5db;
    border-radius: 8px;
    padding: 2rem;
    text-align: center;
    background: #f9fafb;
    transition: border-color 0.3s ease;
}

.image-upload:hover {
    border-color: #3b82f6;
}

.image-upload input[type="file"] {
    display: none;
}

.upload-btn {
    background: #3b82f6;
    color: white;
    padding: 0.75rem 1.5rem;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-weight: 600;
    transition: background-color 0.3s ease;
}

.upload-btn:hover {
    background: #2563eb;
}

.preview-image {
    max-width: 100%;
    height: auto;
    border-radius: 8px;
    margin-top: 1rem;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
}

.size-controls {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
    margin-top: 1rem;
}

.size-controls input {
    padding: 0.5rem;
    font-size: 0.9rem;
}

.actions {
    display: flex;
    gap: 1rem;
    margin-top: 2rem;
    padding-top: 2rem;
    border-top: 2px solid #e2e8f0;
}

.btn {
    padding: 0.75rem 1.5rem;
    border: none;
    border-radius: 6px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    font-family: 'Inter', sans-serif;
}

.btn-primary {
    background: #3b82f6;
    color: white;
}

.btn-primary:hover {
    background: #2563eb;
}

.btn-secondary {
    background: #6b7280;
    color: white;
}

.btn-secondary:hover {
    background: #4b5563;
}

.btn-success {
    background: #10b981;
    color: white;
}

.btn-success:hover {
    background: #059669;
}

.preview-content {
    border: 1px solid #e2e8f0;
    border-radius: 8px;
    padding: 1rem;
    background: #f9fafb;
    margin-bottom: 1rem;
}

.preview-content h3 {
    font-family: 'Playfair Display', serif;
    font-size: 1.2rem;
    margin-bottom: 0.5rem;
    color: #1e293b;
}

.preview-content p {
    color: #6b7280;
    font-size: 0.9rem;
    margin-bottom: 0.5rem;
}

@media (max-width: 1024px) {
    .admin-layout {
        grid-template-columns: 1fr;
    }
    
    .preview-panel {
        position: static;
        max-height: none;
    }
}

@media (max-width: 768px) {
    .admin-container {
        padding: 1rem;
    }
    
    .admin-header h1 {
        font-size: 2rem;
    }
    
    .size-controls {
        grid-template-columns: 1fr;
    }
    
    .actions {
        flex-direction: column;
    }
}
</style>

<div class="admin-container">
    <div class="admin-header">
        <h1>Home Template Admin Panel</h1>
        <p>Edit and preview your home template content in real-time</p>
    </div>

    <div class="admin-layout">
        <!-- Editor Panel -->
        <div class="editor-panel">
            <h2 class="section-title">Content Editor</h2>
            
            <!-- Hero Section Editor -->
            <div class="form-group">
                <label>Hero Title</label>
                <input type="text" id="hero-title" value="Transform Your Business with Innovative Solutions" onchange="updatePreview()">
            </div>
            
            <div class="form-group">
                <label>Hero Subtitle</label>
                <textarea id="hero-subtitle" onchange="updatePreview()">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris.</textarea>
            </div>
            
            <div class="form-group">
                <label>Hero Image</label>
                <div class="image-upload">
                    <input type="file" id="hero-image-upload" accept="image/*" onchange="handleImageUpload(this, 'hero-image')">
                    <button type="button" class="upload-btn" onclick="document.getElementById('hero-image-upload').click()">
                        Choose Hero Image
                    </button>
                    <p style="margin-top: 1rem; font-size: 0.9rem; color: #6b7280;">
                        Recommended size: 600x400px
                    </p>
                </div>
                <div class="size-controls">
                    <input type="number" id="hero-width" placeholder="Width" value="600" onchange="updateImageSize('hero-image')">
                    <input type="number" id="hero-height" placeholder="Height" value="400" onchange="updateImageSize('hero-image')">
                </div>
            </div>
            
            <div class="form-group">
                <label>Hero Image Alt Text</label>
                <input type="text" id="hero-alt" value="Business transformation illustration showing growth and innovation" onchange="updatePreview()">
            </div>
            
            <!-- Services Section Editor -->
            <h3 style="margin-top: 2rem; color: #1e293b; font-family: 'Playfair Display', serif;">Services Section</h3>
            
            <div class="form-group">
                <label>Section Title</label>
                <input type="text" id="services-title" value="What We Offer" onchange="updatePreview()">
            </div>
            
            <div class="form-group">
                <label>Section Subtitle</label>
                <textarea id="services-subtitle" onchange="updatePreview()">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</textarea>
            </div>
            
            <!-- Service 1 -->
            <h4 style="margin-top: 1.5rem; color: #374151;">Service 1</h4>
            <div class="form-group">
                <label>Service Title</label>
                <input type="text" id="service1-title" value="Strategic Planning" onchange="updatePreview()">
            </div>
            <div class="form-group">
                <label>Service Description</label>
                <textarea id="service1-desc" onchange="updatePreview()">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation.</textarea>
            </div>
            
            <!-- Service 2 -->
            <h4 style="margin-top: 1.5rem; color: #374151;">Service 2</h4>
            <div class="form-group">
                <label>Service Title</label>
                <input type="text" id="service2-title" value="Digital Transformation" onchange="updatePreview()">
            </div>
            <div class="form-group">
                <label>Service Description</label>
                <textarea id="service2-desc" onchange="updatePreview()">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation.</textarea>
            </div>
            
            <!-- Service 3 -->
            <h4 style="margin-top: 1.5rem; color: #374151;">Service 3</h4>
            <div class="form-group">
                <label>Service Title</label>
                <input type="text" id="service3-title" value="Analytics & Insights" onchange="updatePreview()">
            </div>
            <div class="form-group">
                <label>Service Description</label>
                <textarea id="service3-desc" onchange="updatePreview()">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation.</textarea>
            </div>
            
            <!-- Service 4 -->
            <h4 style="margin-top: 1.5rem; color: #374151;">Service 4</h4>
            <div class="form-group">
                <label>Service Title</label>
                <input type="text" id="service4-title" value="24/7 Support" onchange="updatePreview()">
            </div>
            <div class="form-group">
                <label>Service Description</label>
                <textarea id="service4-desc" onchange="updatePreview()">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation.</textarea>
            </div>
            
            <!-- Contact Section Editor -->
            <h3 style="margin-top: 2rem; color: #1e293b; font-family: 'Playfair Display', serif;">Contact Section</h3>
            
            <div class="form-group">
                <label>Contact Title</label>
                <input type="text" id="contact-title" value="Get In Touch" onchange="updatePreview()">
            </div>
            
            <div class="form-group">
                <label>Contact Subtitle</label>
                <textarea id="contact-subtitle" onchange="updatePreview()">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris.</textarea>
            </div>
            
            <div class="form-group">
                <label>Address</label>
                <input type="text" id="contact-address" value="123 Business Street, Suite 100 New York, NY 10001" onchange="updatePreview()">
            </div>
            
            <div class="form-group">
                <label>Email</label>
                <input type="email" id="contact-email" value="hello@company.com" onchange="updatePreview()">
            </div>
            
            <div class="form-group">
                <label>Phone</label>
                <input type="text" id="contact-phone" value="+1 (555) 123-4567" onchange="updatePreview()">
            </div>
            
            <div class="actions">
                <button class="btn btn-primary" onclick="saveChanges()">Save Changes</button>
                <button class="btn btn-secondary" onclick="resetToDefault()">Reset to Default</button>
                <button class="btn btn-success" onclick="exportContent()">Export Content</button>
                <button class="btn btn-primary" onclick="publishToGitHub()" style="background: #10b981;">ðŸš€ Publish to GitHub</button>
            </div>
        </div>

        <!-- Preview Panel -->
        <div class="preview-panel">
            <h2 class="section-title">Live Preview</h2>
            <div id="preview-container">
                <!-- Preview content will be inserted here -->
            </div>
        </div>
    </div>
</div>

<script>
// Initialize preview on page load
document.addEventListener('DOMContentLoaded', function() {
    loadContentFromYaml();
    updatePreview();
});

// Load content from the YAML configuration file
async function loadContentFromYaml() {
    try {
        const response = await fetch('/_data/template-content.yml');
        if (response.ok) {
            const yamlText = await response.text();
            const content = parseYaml(yamlText);
            populateFormWithContent(content);
        } else {
            console.log('Could not load YAML file, using default values');
            // Use default values if YAML file is not accessible
        }
    } catch (error) {
        console.log('Error loading YAML file:', error);
        // Use default values if there's an error
    }
}

// Simple YAML parser for basic key-value pairs
function parseYaml(yamlText) {
    const content = {};
    const lines = yamlText.split('\n');
    let currentSection = null;
    let currentSubsection = null;
    
    for (let line of lines) {
        line = line.trim();
        if (line.startsWith('#') || line === '') continue;
        
        if (line.endsWith(':')) {
            const key = line.slice(0, -1).trim();
            if (!currentSection) {
                currentSection = key;
                content[currentSection] = {};
            } else if (!currentSubsection) {
                currentSubsection = key;
                content[currentSection][currentSubsection] = {};
            }
        } else if (line.includes(':') && !line.startsWith('-')) {
            const [key, value] = line.split(':', 2);
            const cleanKey = key.trim();
            const cleanValue = value.trim().replace(/^["']|["']$/g, '');
            
            if (currentSubsection) {
                content[currentSection][currentSubsection][cleanKey] = cleanValue;
            } else if (currentSection) {
                content[currentSection][cleanKey] = cleanValue;
            }
        }
    }
    
    return content;
}

// Populate form fields with content from YAML
function populateFormWithContent(content) {
    if (content.hero) {
        if (content.hero.title) document.getElementById('hero-title').value = content.hero.title;
        if (content.hero.subtitle) document.getElementById('hero-subtitle').value = content.hero.subtitle;
        if (content.hero.image && content.hero.image.alt) document.getElementById('hero-alt').value = content.hero.image.alt;
        if (content.hero.image && content.hero.image.width) document.getElementById('hero-width').value = content.hero.image.width;
        if (content.hero.image && content.hero.image.height) document.getElementById('hero-height').value = content.hero.image.height;
    }
    
    if (content.services) {
        if (content.services.title) document.getElementById('services-title').value = content.services.title;
        if (content.services.subtitle) document.getElementById('services-subtitle').value = content.services.subtitle;
    }
    
    if (content.contact) {
        if (content.contact.title) document.getElementById('contact-title').value = content.contact.title;
        if (content.contact.subtitle) document.getElementById('contact-subtitle').value = content.contact.subtitle;
        if (content.contact.details && content.contact.details.address) document.getElementById('contact-address').value = content.contact.details.address;
        if (content.contact.details && content.contact.details.email) document.getElementById('contact-email').value = content.contact.details.email;
        if (content.contact.details && content.contact.details.phone) document.getElementById('contact-phone').value = content.contact.details.phone;
    }
}

function updatePreview() {
    const container = document.getElementById('preview-container');
    
    // Get all form values
    const heroTitle = document.getElementById('hero-title').value;
    const heroSubtitle = document.getElementById('hero-subtitle').value;
    const heroAlt = document.getElementById('hero-alt').value;
    const servicesTitle = document.getElementById('services-title').value;
    const servicesSubtitle = document.getElementById('services-subtitle').value;
    const service1Title = document.getElementById('service1-title').value;
    const service1Desc = document.getElementById('service1-desc').value;
    const service2Title = document.getElementById('service2-title').value;
    const service2Desc = document.getElementById('service2-desc').value;
    const service3Title = document.getElementById('service3-title').value;
    const service3Desc = document.getElementById('service3-desc').value;
    const service4Title = document.getElementById('service4-title').value;
    const service4Desc = document.getElementById('service4-desc').value;
    const contactTitle = document.getElementById('contact-title').value;
    const contactSubtitle = document.getElementById('contact-subtitle').value;
    const contactAddress = document.getElementById('contact-address').value;
    const contactEmail = document.getElementById('contact-email').value;
    const contactPhone = document.getElementById('contact-phone').value;
    
    // Get hero image
    const heroImage = document.getElementById('hero-image') || 
                     document.querySelector('img[src*="placeholder"]');
    const heroSrc = heroImage ? heroImage.src : 'https://via.placeholder.com/600x400/2563eb/ffffff?text=Hero+Image';
    
    container.innerHTML = `
        <!-- Hero Section -->
        <section class="hero-section" style="margin-bottom: 2rem;">
            <div class="hero-container">
                <div class="hero-content">
                    <h1 class="hero-title">${heroTitle}</h1>
                    <p class="hero-subtitle">${heroSubtitle}</p>
                    <div class="hero-buttons">
                        <a href="#services" class="btn btn-primary">Explore Services</a>
                        <a href="#contact" class="btn btn-secondary">Get Started</a>
                    </div>
                </div>
                <div class="hero-image">
                    <img src="${heroSrc}" alt="${heroAlt}" id="hero-image" style="max-width: 100%; height: auto;">
                </div>
            </div>
        </section>

        <!-- Services Section -->
        <section id="services" class="services-section" style="margin-bottom: 2rem;">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title">${servicesTitle}</h2>
                    <p class="section-subtitle">${servicesSubtitle}</p>
                </div>
                
                <div class="services-grid">
                    <div class="service-card">
                        <div class="service-icon">
                            <img src="https://via.placeholder.com/80x80/1e40af/ffffff?text=Icon" alt="Strategy planning icon" width="80" height="80">
                        </div>
                        <h3 class="service-title">${service1Title}</h3>
                        <p class="service-description">${service1Desc}</p>
                    </div>
                    
                    <div class="service-card">
                        <div class="service-icon">
                            <img src="https://via.placeholder.com/80x80/7c3aed/ffffff?text=Icon" alt="Digital transformation icon" width="80" height="80">
                        </div>
                        <h3 class="service-title">${service2Title}</h3>
                        <p class="service-description">${service2Desc}</p>
                    </div>
                    
                    <div class="service-card">
                        <div class="service-icon">
                            <img src="https://via.placeholder.com/80x80/dc2626/ffffff?text=Icon" alt="Analytics and insights icon" width="80" height="80">
                        </div>
                        <h3 class="service-title">${service3Title}</h3>
                        <p class="service-description">${service3Desc}</p>
                    </div>
                    
                    <div class="service-card">
                        <div class="service-icon">
                            <img src="https://via.placeholder.com/80x80/059669/ffffff?text=Icon" alt="Customer support icon" width="80" height="80">
                        </div>
                        <h3 class="service-title">${service4Title}</h3>
                        <p class="service-description">${service4Desc}</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Contact Section -->
        <section id="contact" class="contact-section">
            <div class="container">
                <div class="contact-content">
                    <div class="contact-info">
                        <h2 class="contact-title">${contactTitle}</h2>
                        <p class="contact-subtitle">${contactSubtitle}</p>
                        
                        <div class="contact-details">
                            <div class="contact-item">
                                <img src="https://via.placeholder.com/24x24/6b7280/ffffff?text=ðŸ“" alt="Location icon" width="24" height="24">
                                <span>${contactAddress}</span>
                            </div>
                            <div class="contact-item">
                                <img src="https://via.placeholder.com/24x24/6b7280/ffffff?text=ðŸ“§" alt="Email icon" width="24" height="24">
                                <span>${contactEmail}</span>
                            </div>
                            <div class="contact-item">
                                <img src="https://via.placeholder.com/24x24/6b7280/ffffff?text=ðŸ“ž" alt="Phone icon" width="24" height="24">
                                <span>${contactPhone}</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="contact-form">
                        <form class="contact-form-container">
                            <div class="form-group">
                                <label for="name">Full Name</label>
                                <input type="text" id="name" name="name" placeholder="Enter your full name" required>
                            </div>
                            <div class="form-group">
                                <label for="email">Email Address</label>
                                <input type="email" id="email" name="email" placeholder="Enter your email address" required>
                            </div>
                            <div class="form-group">
                                <label for="subject">Subject</label>
                                <input type="text" id="subject" name="subject" placeholder="What's this about?" required>
                            </div>
                            <div class="form-group">
                                <label for="message">Message</label>
                                <textarea id="message" name="message" rows="5" placeholder="Tell us more about your project..." required></textarea>
                            </div>
                            <button type="submit" class="btn btn-primary">Send Message</button>
                        </form>
                    </div>
                </div>
            </div>
        </section>
    `;
}

function handleImageUpload(input, targetId) {
    const file = input.files[0];
    if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
            const img = document.getElementById(targetId);
            if (img) {
                img.src = e.target.result;
            }
            updatePreview();
        };
        reader.readAsDataURL(file);
    }
}

function updateImageSize(targetId) {
    const width = document.getElementById('hero-width').value;
    const height = document.getElementById('hero-height').value;
    const img = document.getElementById(targetId);
    if (img) {
        img.style.width = width + 'px';
        img.style.height = height + 'px';
    }
}

function saveChanges() {
    // Collect all form data
    const formData = {
        hero: {
            title: document.getElementById('hero-title').value,
            subtitle: document.getElementById('hero-subtitle').value,
            alt: document.getElementById('hero-alt').value,
            image: document.getElementById('hero-image')?.src || ''
        },
        services: {
            title: document.getElementById('services-title').value,
            subtitle: document.getElementById('services-subtitle').value,
            items: [
                {
                    title: document.getElementById('service1-title').value,
                    description: document.getElementById('service1-desc').value
                },
                {
                    title: document.getElementById('service2-title').value,
                    description: document.getElementById('service2-desc').value
                },
                {
                    title: document.getElementById('service3-title').value,
                    description: document.getElementById('service3-desc').value
                },
                {
                    title: document.getElementById('service4-title').value,
                    description: document.getElementById('service4-desc').value
                }
            ]
        },
        contact: {
            title: document.getElementById('contact-title').value,
            subtitle: document.getElementById('contact-subtitle').value,
            address: document.getElementById('contact-address').value,
            email: document.getElementById('contact-email').value,
            phone: document.getElementById('contact-phone').value
        }
    };
    
    // Save to localStorage for persistence
    localStorage.setItem('homeTemplateData', JSON.stringify(formData));
    
    // Generate YAML content
    const yamlContent = generateYamlContent(formData);
    
    // Create download link for the updated YAML file
    const dataBlob = new Blob([yamlContent], {type: 'text/yaml'});
    const url = URL.createObjectURL(dataBlob);
    const link = document.createElement('a');
    link.href = url;
    link.download = 'template-content.yml';
    link.click();
    URL.revokeObjectURL(url);
    
    alert('Changes saved! A new YAML file has been downloaded. Replace the contents of _data/template-content.yml with this file to apply your changes permanently.');
}

function generateYamlContent(formData) {
    let yaml = `# Home Template Content Configuration
# This file stores all content for the home template
# The admin panel reads from and writes to this file

hero:
  title: "${formData.hero.title}"
  subtitle: "${formData.hero.subtitle}"
  image:
    src: "${formData.hero.image}"
    alt: "${formData.hero.alt}"
    width: ${document.getElementById('hero-width').value}
    height: ${document.getElementById('hero-height').value}
  buttons:
    primary:
      text: "Explore Services"
      href: "#services"
    secondary:
      text: "Get Started"
      href: "#contact"

services:
  title: "${formData.services.title}"
  subtitle: "${formData.services.subtitle}"
  items:
    - title: "${formData.services.items[0].title}"
      description: "${formData.services.items[0].description}"
      icon:
        src: "https://via.placeholder.com/80x80/1e40af/ffffff?text=Icon"
        alt: "Strategy planning icon"
        width: 80
        height: 80
    - title: "${formData.services.items[1].title}"
      description: "${formData.services.items[1].description}"
      icon:
        src: "https://via.placeholder.com/80x80/7c3aed/ffffff?text=Icon"
        alt: "Digital transformation icon"
        width: 80
        height: 80
    - title: "${formData.services.items[2].title}"
      description: "${formData.services.items[2].description}"
      icon:
        src: "https://via.placeholder.com/80x80/dc2626/ffffff?text=Icon"
        alt: "Analytics and insights icon"
        width: 80
        height: 80
    - title: "${formData.services.items[3].title}"
      description: "${formData.services.items[3].description}"
      icon:
        src: "https://via.placeholder.com/80x80/059669/ffffff?text=Icon"
        alt: "Customer support icon"
        width: 80
        height: 80

contact:
  title: "${formData.contact.title}"
  subtitle: "${formData.contact.subtitle}"
  details:
    address: "${formData.contact.address}"
    email: "${formData.contact.email}"
    phone: "${formData.contact.phone}"
  icons:
    location:
      src: "https://via.placeholder.com/24x24/6b7280/ffffff?text=ðŸ“"
      alt: "Location icon"
    email:
      src: "https://via.placeholder.com/24x24/6b7280/ffffff?text=ðŸ“§"
      alt: "Email icon"
    phone:
      src: "https://via.placeholder.com/24x24/6b7280/ffffff?text=ðŸ“ž"
      alt: "Phone icon"`;
    
    return yaml;
}

function resetToDefault() {
    if (confirm('Are you sure you want to reset all changes to default values?')) {
        // Reset all form fields to default values
        document.getElementById('hero-title').value = 'Transform Your Business with Innovative Solutions';
        document.getElementById('hero-subtitle').value = 'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris.';
        document.getElementById('hero-alt').value = 'Business transformation illustration showing growth and innovation';
        document.getElementById('services-title').value = 'What We Offer';
        document.getElementById('services-subtitle').value = 'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.';
        document.getElementById('service1-title').value = 'Strategic Planning';
        document.getElementById('service1-desc').value = 'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation.';
        document.getElementById('service2-title').value = 'Digital Transformation';
        document.getElementById('service2-desc').value = 'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation.';
        document.getElementById('service3-title').value = 'Analytics & Insights';
        document.getElementById('service3-desc').value = 'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation.';
        document.getElementById('service4-title').value = '24/7 Support';
        document.getElementById('service4-desc').value = 'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation.';
        document.getElementById('contact-title').value = 'Get In Touch';
        document.getElementById('contact-subtitle').value = 'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris.';
        document.getElementById('contact-address').value = '123 Business Street, Suite 100 New York, NY 10001';
        document.getElementById('contact-email').value = 'hello@company.com';
        document.getElementById('contact-phone').value = '+1 (555) 123-4567';
        
        // Reset image
        const heroImage = document.getElementById('hero-image');
        if (heroImage) {
            heroImage.src = 'https://via.placeholder.com/600x400/2563eb/ffffff?text=Hero+Image';
        }
        
        updatePreview();
        localStorage.removeItem('homeTemplateData');
    }
}

function exportContent() {
    const formData = {
        hero: {
            title: document.getElementById('hero-title').value,
            subtitle: document.getElementById('hero-subtitle').value,
            alt: document.getElementById('hero-alt').value
        },
        services: {
            title: document.getElementById('services-title').value,
            subtitle: document.getElementById('services-subtitle').value,
            items: [
                {
                    title: document.getElementById('service1-title').value,
                    description: document.getElementById('service1-desc').value
                },
                {
                    title: document.getElementById('service2-title').value,
                    description: document.getElementById('service2-desc').value
                },
                {
                    title: document.getElementById('service3-title').value,
                    description: document.getElementById('service3-desc').value
                },
                {
                    title: document.getElementById('service4-title').value,
                    description: document.getElementById('service4-desc').value
                }
            ]
        },
        contact: {
            title: document.getElementById('contact-title').value,
            subtitle: document.getElementById('contact-subtitle').value,
            address: document.getElementById('contact-address').value,
            email: document.getElementById('contact-email').value,
            phone: document.getElementById('contact-phone').value
        }
    };
    
    const dataStr = JSON.stringify(formData, null, 2);
    const dataBlob = new Blob([dataStr], {type: 'application/json'});
    const url = URL.createObjectURL(dataBlob);
    const link = document.createElement('a');
    link.href = url;
    link.download = 'home-template-content.json';
    link.click();
    URL.revokeObjectURL(url);
}

// Publish content via GitHub Issues (Secure Method)
async function publishToGitHub() {
    try {
        // Show loading state
        const publishBtn = document.querySelector('button[onclick="publishToGitHub()"]');
        const originalText = publishBtn.innerHTML;
        publishBtn.innerHTML = 'â³ Publishing...';
        publishBtn.disabled = true;
        
        // Generate YAML content
        const formData = {
            hero: {
                title: document.getElementById('hero-title').value,
                subtitle: document.getElementById('hero-subtitle').value,
                alt: document.getElementById('hero-alt').value,
                image: document.getElementById('hero-image')?.src || ''
            },
            services: {
                title: document.getElementById('services-title').value,
                subtitle: document.getElementById('services-subtitle').value,
                items: [
                    {
                        title: document.getElementById('service1-title').value,
                        description: document.getElementById('service1-desc').value
                    },
                    {
                        title: document.getElementById('service2-title').value,
                        description: document.getElementById('service2-desc').value
                    },
                    {
                        title: document.getElementById('service3-title').value,
                        description: document.getElementById('service3-desc').value
                    },
                    {
                        title: document.getElementById('service4-title').value,
                        description: document.getElementById('service4-desc').value
                    }
                ]
            },
            contact: {
                title: document.getElementById('contact-title').value,
                subtitle: document.getElementById('contact-subtitle').value,
                address: document.getElementById('contact-address').value,
                email: document.getElementById('contact-email').value,
                phone: document.getElementById('contact-phone').value
            }
        };
        
        const yamlContent = generateYamlContent(formData);
        const commitMessage = `Update home template content via admin panel - ${new Date().toLocaleString()}`;
        
        // Create GitHub issue with the content
        const issueTitle = `[ADMIN-PUBLISH] ${commitMessage}`;
        const issueBody = `## Content Update Request

**Commit Message:** ${commitMessage}

**YAML Content:**
\`\`\`yaml
${yamlContent}
\`\`\`

---
*This issue was created by the admin panel and will be automatically processed by GitHub Actions.*`;

        // Create the issue using GitHub's REST API
        const response = await fetch(`https://api.github.com/repos/betashorts/betashorts-site/issues`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': `token ${getGitHubToken()}`,
                'Accept': 'application/vnd.github.v3+json'
            },
            body: JSON.stringify({
                title: issueTitle,
                body: issueBody,
                labels: ['admin-publish']
            })
        });
        
        if (response.ok) {
            const issue = await response.json();
            alert(`âœ… Publishing request submitted!\n\nIssue #${issue.number} created successfully.\n\nGitHub Actions will process your changes and update the site automatically.\n\nYou can track progress at: ${issue.html_url}`);
            
            // Save to localStorage as well
            localStorage.setItem('homeTemplateData', JSON.stringify(formData));
        } else {
            const error = await response.json();
            throw new Error(`GitHub API Error: ${error.message || 'Unknown error'}`);
        }
        
    } catch (error) {
        console.error('Publish error:', error);
        alert(`âŒ Failed to submit publishing request: ${error.message}\n\nPlease check your GitHub token and try again.`);
    } finally {
        // Reset button state
        const publishBtn = document.querySelector('button[onclick="publishToGitHub()"]');
        publishBtn.innerHTML = originalText;
        publishBtn.disabled = false;
    }
}

// Get GitHub token from user input (more secure than hardcoding)
function getGitHubToken() {
    let token = localStorage.getItem('github_token');
    if (!token) {
        token = prompt('Please enter your GitHub Personal Access Token (it will be stored locally for this session):');
        if (token) {
            localStorage.setItem('github_token', token);
        }
    }
    return token;
}

// Load saved data on page load
document.addEventListener('DOMContentLoaded', function() {
    const savedData = localStorage.getItem('homeTemplateData');
    if (savedData) {
        const data = JSON.parse(savedData);
        
        // Restore form values
        if (data.hero) {
            document.getElementById('hero-title').value = data.hero.title || '';
            document.getElementById('hero-subtitle').value = data.hero.subtitle || '';
            document.getElementById('hero-alt').value = data.hero.alt || '';
        }
        
        if (data.services) {
            document.getElementById('services-title').value = data.services.title || '';
            document.getElementById('services-subtitle').value = data.services.subtitle || '';
            
            if (data.services.items && data.services.items.length >= 4) {
                document.getElementById('service1-title').value = data.services.items[0].title || '';
                document.getElementById('service1-desc').value = data.services.items[0].description || '';
                document.getElementById('service2-title').value = data.services.items[1].title || '';
                document.getElementById('service2-desc').value = data.services.items[1].description || '';
                document.getElementById('service3-title').value = data.services.items[2].title || '';
                document.getElementById('service3-desc').value = data.services.items[2].description || '';
                document.getElementById('service4-title').value = data.services.items[3].title || '';
                document.getElementById('service4-desc').value = data.services.items[3].description || '';
            }
        }
        
        if (data.contact) {
            document.getElementById('contact-title').value = data.contact.title || '';
            document.getElementById('contact-subtitle').value = data.contact.subtitle || '';
            document.getElementById('contact-address').value = data.contact.address || '';
            document.getElementById('contact-email').value = data.contact.email || '';
            document.getElementById('contact-phone').value = data.contact.phone || '';
        }
        
        updatePreview();
    }
});
</script> 